<div class="p-6">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">Audit Logs</h1>
    <p class="mt-2 text-sm text-gray-600">View system activity and security events.</p>
  </div>

  <div class="overflow-hidden bg-white border border-gray-200 rounded-lg shadow-sm">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th
            scope="col"
            class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"
          >
            Timestamp
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"
          >
            Actor
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"
          >
            Action
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"
          >
            Resource
          </th>
          <th
            scope="col"
            class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"
          >
            Details
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let log of logs()">
          <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap">
            {{ log.createdAt | date: 'medium' }}
          </td>
          <td class="px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap">
            {{ log.username }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span
              [class]="
                'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ' +
                getActionClass(log.action)
              "
            >
              {{ log.action }}
            </span>
          </td>
          <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap">
            {{ log.resource }} #{{ log.resourceId }}
          </td>
          <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate" [title]="log.metadata">
            {{ log.metadata }}
          </td>
        </tr>

        <tr *ngIf="logs().length === 0">
          <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
            No audit logs found.
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="flex items-center justify-between px-6 py-3 bg-gray-50 border-t border-gray-200">
      <div class="flex items-center">
        <span class="text-sm text-gray-700">
          Page <span class="font-medium">{{ currentPage() + 1 }}</span> of
          <span class="font-medium">{{ totalPages() }}</span>
        </span>
      </div>
      <div class="flex space-x-2">
        <button
          (click)="onPageChange(currentPage() - 1)"
          [disabled]="currentPage() === 0"
          class="px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Previous
        </button>
        <button
          (click)="onPageChange(currentPage() + 1)"
          [disabled]="currentPage() >= totalPages() - 1"
          class="px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</div>
